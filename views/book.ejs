<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title><%= book.name %> - <%= book.publisher %></title>
  <meta name="description" content="<%= book.description.replace(/<[^>]+>/g, '').substring(0, 160) %>" />
  <meta name="author" content="<%= book.author?.[0]?.name || 'Unknown Author' %>" />


  <!-- Open Graph (WhatsApp, Facebook, Instagram) -->
<meta property="og:title" content="<%= book.name %>" />
<meta property="og:description" content="
  <%= 
    (
      (book.description ? book.description.replace(/<[^>]+>/g, '').substring(0, 600) : 'No description available') 
      + ' | Author: ' + book.author 
      + ' | Price: ' + (book.discounted_price ? book.discounted_price : book.price) + ' KES' 
      + (book.rating > 0 ? ' | Rating: ' + book.rating + '/5' : '')
    ).trim() 
  %>" 
/>
<meta property="og:image" content="<%= book.image || 'https://sharemybook.online/default-cover.jpg' %>" />
<meta property="og:url" content="https://sharemybook.online/<%= book.slug %>" />
<meta property="og:type" content="book" />

<meta property="book:author" content="<%= book.author %>" />
<meta property="book:price:amount" content="<%= book.discounted_price ? book.discounted_price : book.price %>" />
<meta property="book:price:currency" content="KES" />
<% if (book.rating > 0) { %>
  <meta property="book:rating:value" content="<%= book.rating %>" />
  <meta property="book:rating:scale" content="5" />
<% } %>

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="<%= book.name %>" />
<meta name="twitter:description" content="
  <%= 
    (
      (book.description ? book.description.replace(/<[^>]+>/g, '').substring(0, 600) : 'No description available') 
      + ' | Author: ' + book.author 
      + ' | Price: ' + (book.discounted_price ? book.discounted_price : book.price) + ' KES' 
      + (book.rating > 0 ? ' | Rating: ' + book.rating + '/5' : '')
    ).trim() 
  %>" 
/>
<meta name="twitter:image" content="<%= book.image || 'https://sharemybook.online/default-cover.jpg' %>" />
<meta name="twitter:url" content="https://sharemybook.online/<%= book.slug %>" />
<meta name="twitter:site" content="@sharemybook" /> <!-- Replace with your Twitter handle -->


</head>
<body>
  <h1><%= book.name %></h1>
  <p>Author: <%= book.author?.[0]?.name %></p>
  <img src="<%= book.image %>" alt="<%= book.name %>" style="max-width:300px;" />
  <div><%- book.description %></div>
</body>
</html>
